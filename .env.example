# =============================================================================
# GraphDB Production Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# =============================================================================

# =============================================================================
# Docker & Version
# =============================================================================
# Docker registry (for custom registry, otherwise uses Docker Hub)
DOCKER_REGISTRY=dd0wney
VERSION=latest

# =============================================================================
# PostgreSQL Database (License Server)
# =============================================================================
POSTGRES_DB=graphdb_licenses
POSTGRES_USER=graphdb
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_PORT=5432

# =============================================================================
# License Server
# =============================================================================
LICENSE_SERVER_PORT=9000

# Admin API Key (REQUIRED - protects admin endpoints)
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=CHANGE_ME_GENERATE_RANDOM_KEY

# Stripe Integration (Optional - for commercial licensing)
# Get keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_live_xxxxxxxxxxxxxxxxxxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxxxxxxxxxxxxxxxxxx

# Email Configuration (Optional - for sending license keys)
# SendGrid:
#   SMTP_HOST=smtp.sendgrid.net
#   SMTP_PORT=587
#   SMTP_USERNAME=apikey
#   SMTP_PASSWORD=SG.xxxxxxxxxxxxxxxxxxxxx
#
# Mailgun:
#   SMTP_HOST=smtp.mailgun.org
#   SMTP_PORT=587
#   SMTP_USERNAME=postmaster@yourdomain.com
#   SMTP_PASSWORD=xxxxxxxxxxxxxxxxxxxxx
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USERNAME=apikey
SMTP_PASSWORD=
FROM_EMAIL=licenses@graphdb.dev
FROM_NAME=GraphDB Licensing

# =============================================================================
# GraphDB Community Edition
# =============================================================================
GRAPHDB_COMMUNITY_PORT=8080

# =============================================================================
# GraphDB Enterprise Edition
# =============================================================================
GRAPHDB_ENTERPRISE_PORT=8081

# License Key (REQUIRED for Enterprise edition)
# Get from license server or purchase at: https://graphdb.dev/pricing
GRAPHDB_LICENSE_KEY=CGDB-XXXX-XXXX-XXXX-XXXX

# Telemetry (Optional - helps us improve GraphDB)
GRAPHDB_ENABLE_TELEMETRY=false

# =============================================================================
# Authentication (REQUIRED for both editions)
# =============================================================================
# JWT Secret (for API authentication)
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_ME_GENERATE_RANDOM_SECRET

# Default admin password
# Change this immediately after first login!
ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# =============================================================================
# Nginx Reverse Proxy (Optional)
# =============================================================================
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# =============================================================================
# Monitoring (Optional - Prometheus & Grafana)
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD
GRAFANA_PLUGINS=

# =============================================================================
# Quick Start Commands
# =============================================================================
#
# 1. Copy this file:
#    cp .env.example .env
#
# 2. Generate secrets:
#    echo "JWT_SECRET=$(openssl rand -base64 32)" >> .env
#    echo "ADMIN_API_KEY=$(openssl rand -hex 32)" >> .env
#
# 3. Edit .env and set your passwords and keys
#
# 4. Start Community edition:
#    docker-compose -f docker-compose.prod.yml --profile community up -d
#
# 5. Start Enterprise edition:
#    docker-compose -f docker-compose.prod.yml --profile enterprise up -d
#
# 6. Start with monitoring:
#    docker-compose -f docker-compose.prod.yml --profile enterprise --profile monitoring up -d
#
# 7. View logs:
#    docker-compose -f docker-compose.prod.yml logs -f
#
# 8. Stop all services:
#    docker-compose -f docker-compose.prod.yml --profile enterprise --profile monitoring down
#
# =============================================================================
# Security Notes
# =============================================================================
#
# 1. Change ALL default passwords before deploying to production
# 2. Use strong, randomly generated secrets (32+ characters)
# 3. Never commit .env to version control
# 4. Add .env to .gitignore
# 5. Use environment-specific .env files (.env.production, .env.staging)
# 6. Rotate secrets regularly (every 90 days recommended)
# 7. Use HTTPS in production (configure nginx with SSL certificates)
# 8. Restrict database access to internal network only
# 9. Enable firewall rules to limit access to required ports only
# 10. Regular backups of PostgreSQL database
#
# =============================================================================
